<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get taxonomy via galah::taxa_search() — make_taxonomy • envClean</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get taxonomy via galah::taxa_search() — make_taxonomy"><meta property="og:description" content="Only queries galah for taxa not already in taxonomy_file. Can return a list,
for several levels of taxonomic hierarchy, with the 'best' match at that
level. For example, if 'genus' is provided in needed_ranks, the returned
list will have an element 'genus' that contains, in a column named taxa,
and for each of the original names provided, the best result at genus level
or higher (in cases where no genus level match was available)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">envClean</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/010_overview.html">Overview</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Acanthiza/envClean/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get taxonomy via <code>galah::taxa_search()</code></h1>
    <small class="dont-index">Source: <a href="https://github.com/Acanthiza/envClean/blob/HEAD/R/make_galah_taxonomy.R" class="external-link"><code>R/make_galah_taxonomy.R</code></a></small>
    <div class="hidden name"><code>make_taxonomy.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Only queries galah for taxa not already in <code>taxonomy_file</code>. Can return a list,
for several levels of taxonomic hierarchy, with the 'best' match at that
level. For example, if 'genus' is provided in <code>needed_ranks</code>, the returned
list will have an element 'genus' that contains, in a column named <code>taxa</code>,
and for each of the original names provided, the best result at genus level
<em>or higher</em> (in cases where no genus level match was available).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_taxonomy</span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  taxa_col <span class="op">=</span> <span class="st">"original_name"</span>,</span>
<span>  taxonomy_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  force_new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>original_name <span class="op">=</span> <span class="cn">NULL</span>, timediff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">as.difftime</a></span><span class="op">(</span><span class="fl">26</span>, units <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  remove_taxa <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bold:"</span>, <span class="st">"BOLD:"</span>, <span class="st">"unverified"</span>, <span class="st">"annual herb"</span>, <span class="st">"annual grass"</span>,</span>
<span>    <span class="st">"incertae sedis"</span>, <span class="st">"\\?"</span>, <span class="st">"another species"</span>, <span class="st">"not naturalised in SA"</span>,</span>
<span>    <span class="st">"unidentified"</span>, <span class="st">"unverified"</span>, <span class="st">"annual tussock grass"</span>, <span class="st">"*no id"</span>, <span class="st">"spec\\."</span><span class="op">)</span>,</span>
<span>  remove_strings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"\\s\\-\\-\\s.*"</span>, <span class="st">"\\ssp\\.$"</span>, <span class="st">"\\sssp\\.$"</span>,</span>
<span>    <span class="st">"\\sspec\\.$"</span>, <span class="st">"dead"</span><span class="op">)</span>,</span>
<span>  not_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp"</span>, <span class="st">"ssp"</span>, <span class="st">"var"</span>, <span class="st">"subsp"</span>, <span class="st">"subspecies"</span>, <span class="st">"form"</span>, <span class="st">"race"</span>, <span class="st">"nov"</span>, <span class="st">"aff"</span>,</span>
<span>    <span class="st">"cf"</span>, <span class="st">"lineage"</span>, <span class="st">"group"</span>, <span class="st">"et"</span>, <span class="st">"al"</span>, <span class="st">"and"</span>, <span class="st">"pl"</span>, <span class="st">"revised"</span>, <span class="st">"nov"</span>, <span class="st">"sensu"</span>, <span class="st">"lato"</span><span class="op">)</span>,</span>
<span>  tri_strings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"\\sssp\\s"</span>, <span class="st">"\\sssp\\.\\s"</span>, <span class="st">"\\svar\\s"</span>,</span>
<span>    <span class="st">"\\svar\\.\\s"</span>, <span class="st">"\\ssubsp\\."</span>, <span class="st">"\\ssubspecies"</span>, <span class="st">"\\sform\\)"</span>,</span>
<span>    <span class="st">"\\sform\\s"</span>, <span class="st">"\\sf\\."</span>, <span class="st">"\\srace\\s"</span>, <span class="st">"\\srace\\)"</span>,</span>
<span>    <span class="st">"\\sp\\.v\\."</span><span class="op">)</span>,</span>
<span>  atlas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Australia"</span><span class="op">)</span>,</span>
<span>  tweak_species <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  return_taxonomy <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  limit <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  needed_ranks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span><span class="op">)</span>,</span>
<span>  overrides <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>df</dt>
<dd><p>Dataframe with <code>taxa_col</code>. Can be <code>NULL</code> only if taxonomy_file
already exists.</p></dd>


<dt>taxa_col</dt>
<dd><p>Character or index. Name or index of column with taxa names.
Each unique taxa in this column will be queried against <code><a href="https://galah.ala.org.au/R/reference/search_all.html" class="external-link">galah::search_taxa</a></code>
and appear in the results list element <code>lutaxa</code>in a column called
<code>original_name</code></p></dd>


<dt>taxonomy_file</dt>
<dd><p>Character. File path to save results to. File type
ignored. .parquet file used.</p></dd>


<dt>force_new</dt>
<dd><p>List with elements <code>difftime</code> and any column name from
<code>taxonomy_file</code>. If <code>taxonomy_file</code> already exists any column matches between
<code>force_new</code> and <code>taxonomy_file</code>, matching levels within that column will be
requeried. Likewise any <code>original_name</code> that has not been searched since
<code>difftime</code> will be requeried. Set either to <code>NULL</code> to ignore.</p></dd>


<dt>remove_taxa</dt>
<dd><p>Character. Rows with regular expressions in <code>taxa_col</code>
that match <code>remove_taxa</code> are removed (rows are removed).</p></dd>


<dt>remove_strings</dt>
<dd><p>Character. Text that matches <code>remove_strings</code> is
removed from the <code>taxa_col</code> before searching (text, not row, is removed).</p></dd>


<dt>not_names</dt>
<dd><p>Character. Text that matches <code>non_name_strings</code> is used to
remove non-names from original_names before a word count to indicate (guess)
if the original_name is trinomial (original_is_tri field in lutaxa).</p></dd>


<dt>tri_strings</dt>
<dd><p>Character. Text that matches <code>tri_strings</code> is
used to indicate if the original_name is trinomial (original_is_tri field in
output lutaxa).</p></dd>


<dt>atlas</dt>
<dd><p>Character. Name of galah atlas to use.</p></dd>


<dt>return_taxonomy</dt>
<dd><p>Logical. If <code>TRUE</code>, a list is returned containing the
best match for each original_name in <code>lutaxa</code> and additional elements named
for their rank (see <code><a href="lurank.html">envClean::lurank</a></code>) with unique rows for that rank. One
element per rank provided in <code>needed_ranks</code></p></dd>


<dt>limit</dt>
<dd><p>Logical. If <code>TRUE</code> the returned list will be limited to those
<code>original_name</code>s in <code>df</code></p></dd>


<dt>needed_ranks</dt>
<dd><p>Character vector of ranks required in the returned list.
Can be "all" or any combination of ranks from <code><a href="lurank.html">envClean::lurank</a></code> greater than
or equal to <em>subspecies</em>.</p></dd>


<dt>overrides</dt>
<dd><p>Used to override results returned by <code><a href="https://galah.ala.org.au/R/reference/search_all.html" class="external-link">galah::search_taxa()</a></code>.
Dataframe with (at least) columns: <code>taxa_col</code> and <code>taxa_to_search</code>.
Can also contain any number of <code>use_x</code> columns where <code>x</code> is any of
kingdom, phylum, class, order, family, genus, species, subspecies, variety and form. A two step process then attempts
to find better results than if searched on <code>taxa_col</code>. Step 1 searches for
<code>taxa_to_search</code> instead of <code>taxa_col</code>. If any <code>use_x</code> columns are present,
step 2 then checks that the results from step 1 have a result at <code>x</code>. If not,
level <code>x</code> results will be taken from <code>use_x</code>.</p></dd>


<dt>tweak_species.</dt>
<dd><p>Logical. If <code>TRUE</code> (default) and the returned <code>species</code>
column result ends in a full stop, the values returned in the <code>species</code>
column will be directly taken from the <code>scientific_name</code> column. See details.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Null or list (depending on <code>return_taxonomy</code>). Writes
<code>taxonomy_file</code>. <code>taxa_col</code> will be <code>original_name</code> in any outputs. Note that
<code>taxa_col</code>, as <code>original_name</code>, will have any quotes removed.
If list, then elements:</p><ul><li><p>raw - the 'raw' results returned from <code><a href="https://galah.ala.org.au/R/reference/search_all.html" class="external-link">galah::search_taxa()</a></code>, tweaked
by: column <code>rank</code> is an ordered factor as per <code><a href="lurank.html">envClean::lurank</a></code>;
rank_adj is a new column that will reflect the rank column unless rank is
less than subspecies, in which case it will be subspecies; and
original_is_tri is a new column</p></li>
<li><p>needed_ranks - One element for each rank specified in <code>needed_ranks</code>.</p><ul><li><p>lutaxa - dataframe. For each unique name in <code>taxa_col</code>, the best
<code>taxa</code> taxonomic bin to use, for each <code>original_name</code>, taking into
account each level of <code>needed_ranks</code></p><ul><li><p>original_name - unique values from <code>taxa_col</code></p></li>
<li><p>match_type - directly from <code><a href="https://galah.ala.org.au/R/reference/search_all.html" class="external-link">galah::search_taxa()</a></code></p></li>
<li><p>matched_rank - <code>rank</code> column from <code><a href="https://galah.ala.org.au/R/reference/search_all.html" class="external-link">galah::search_taxa()</a></code></p></li>
<li><p>returned_rank - the rank of the <code>taxa</code> returned for each
<code>original_name</code>. This will never be lower than <code>needed_rank</code> but
may be higher than <code>needed_rank</code> if no match was available at
<code>needed_rank</code>. Use this 'rank' to filter bins in a cleaning
workflow</p></li>
<li><p>taxa - the best taxa available for <code>original_name</code> at
<code>needed_rank</code>, perhaps taking into account <code>overrides</code></p></li>
<li><p>override - is the <code>taxa</code> the result of an override?</p></li>
<li><p>original_is_tri - Experimental. Is the <code>original_name</code> a
trinomial? Highlights cases where the matched rank is &gt; subspecies
but the <code>original_name</code> is probably a subspecies. Guesses
are based on a word count after removal of: <code>not_names</code>; numbers;
punctuation; capitalised words that are not the first word; and single
letter 'words'. <code>tri_strings</code> override the guess - flagging TRUE.
Note, clearly, this is only an (informed) guess at whether the
<code>original_name</code> is trinomial.</p></li>
</ul></li>
<li><p>taxonomy - dataframe. For each <code>taxa</code> in <code>lutaxa</code> a row of
taxonomic hierarchy</p></li>
</ul></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The argument <code>tweak_species</code> replaces the <code><a href="https://galah.ala.org.au/R/reference/search_all.html" class="external-link">galah::search_taxa()</a></code> result in
the <code>species</code> column with the result in the <code>scientific_name</code> column. This
attempt to deal with instances where <code><a href="https://galah.ala.org.au/R/reference/search_all.html" class="external-link">galah::search_taxa()</a></code> returns odd
results in <code>species</code> but good results in <code>scientific_name</code>. e.g.
galah::search_taxa("Acacia sp. Small Red-leaved Wattle (J.B.Williams 95033)")
returns <code>spec.</code> in the species column but
<code>Acacia sp. Small Red-leaved Wattle (J.B.Williams 95033)</code> in the
<code>scientific_name</code> column</p>
<p>Previous <code>envClean::make_taxonomy()</code> function is still available via
<code><a href="make_gbif_taxonomy.html">envClean::make_gbif_taxonomy()</a></code></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># setup</span></span></span>
<span class="r-in"><span>  <span class="co"># library("envClean")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">temp_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">taxa_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>taxa <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Charadrius rubricollis"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Thinornis cucullatus"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Melithreptus gularis laetior"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Melithreptus gularis gularis"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Eucalyptus viminalis"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Eucalyptus viminalis cygnetensis"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Eucalyptus"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Charadrius mongolus all subspecies"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Bettongia lesueur Barrow and Boodie Islands subspecies"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Lagorchestes hirsutus Central Australian subspecies"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Perameles gunnii Victorian subspecies"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Pterostylis sp. Rock ledges (pl. 185, Bates &amp; Weber 1990)"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Spyridium glabrisepalum"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Spyridium eriocephalum var. glabrisepalum"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Petrogale lateralis (MacDonnell Ranges race)"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Gehyra montium (revised)"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Korthalsella japonica f. japonica"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Galaxias sp. nov. 'Hunter'"</span></span></span>
<span class="r-in"><span>                                     , <span class="st">"Not a taxa"</span></span></span>
<span class="r-in"><span>                                     <span class="op">)</span></span></span>
<span class="r-in"><span>                            <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># make taxonomy (returns list and writes taxonomy_file)</span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span> <span class="op">&lt;-</span> <span class="fu">make_taxonomy</span><span class="op">(</span>df <span class="op">=</span> <span class="va">taxa_df</span></span></span>
<span class="r-in"><span>                            , taxa_col <span class="op">=</span> <span class="st">"taxa"</span></span></span>
<span class="r-in"><span>                            , taxonomy_file <span class="op">=</span> <span class="va">temp_file</span></span></span>
<span class="r-in"><span>                            , needed_ranks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"kingdom"</span>, <span class="st">"genus"</span>, <span class="st">"species"</span>, <span class="st">"subspecies"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                            <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Matched <span style="font-weight: bold;">17 of 19</span> taxonomic search terms in selected atlas (Australia).</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">2 unmatched search terms:</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> <span style="color: #BBBB00;">"Galaxias sp. nov. Hunter", "Not a taxa"</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> saving results to C:/temp/joel\RtmpuEJnAu\file175c77d07295.parquet</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following were completely unmatched: Galaxias sp. nov. Hunter and Not a taxa. Consider providing more taxonomic levels, or an override, for each unmatched taxa?</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There was 1 warning in `dplyr::filter()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `returned_rank == min(returned_rank)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning in `min()`:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> no non-missing arguments to min; returning Inf</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">raw</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 19 × 19</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    original_name              search_term scientific_name scientific_name_auth…¹</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Bettongia lesueur Barrow … Bettongia … Bettongia lesu… <span style="color: #BB0000;">NA</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Charadrius mongolus all s… Charadrius… Charadrius (Ch… Pallas, 1776          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Charadrius rubricollis     Charadrius… Phalaropus lob… (Linnaeus, 1758)      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Eucalyptus                 Eucalyptus  Eucalyptus      L'Hér.                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Eucalyptus viminalis       Eucalyptus… Eucalyptus vim… Labill.               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Eucalyptus viminalis cygn… Eucalyptus… Eucalyptus vim… Boomsma               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Galaxias sp. nov. Hunter   Galaxias s… <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Gehyra montium (revised)   Gehyra mon… Gehyra montium  Storr, 1982           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Korthalsella japonica f. … Korthalsel… Korthalsella j… (Thunb.) Engl.        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Lagorchestes hirsutus Cen… Lagorchest… Lagorchestes h… Gould, 1844           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Melithreptus gularis gula… Melithrept… Melithreptus (… (Gould, 1837)         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Melithreptus gularis laet… Melithrept… Melithreptus (… Gould, 1875           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Not a taxa                 Not a taxa  <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> Perameles gunnii Victoria… Perameles … Perameles gunn… <span style="color: #BB0000;">NA</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> Petrogale lateralis (MacD… Petrogale … Petrogale late… Gould, 1842           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> Pterostylis sp. Rock ledg… Pterostyli… Pterostylis     R.Br.                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> Spyridium eriocephalum va… Spyridium … Spyridium erio… J.M.Black             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> Spyridium glabrisepalum    Spyridium … Spyridium erio… J.M.Black             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span> Thinornis cucullatus       Thinornis … Thinornis cucu… (Vieillot, 1818)      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ abbreviated name: ¹​scientific_name_authorship</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 15 more variables: taxon_concept_id &lt;chr&gt;, rank &lt;ord&gt;, match_type &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   kingdom &lt;chr&gt;, phylum &lt;chr&gt;, class &lt;chr&gt;, order &lt;chr&gt;, family &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   genus &lt;chr&gt;, species &lt;chr&gt;, vernacular_name &lt;chr&gt;, stamp &lt;dttm&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   subspecies &lt;chr&gt;, rank_adj &lt;ord&gt;, original_is_tri &lt;lgl&gt;</span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">kingdom</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lutaxa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 0 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 6 variables: original_name &lt;chr&gt;, match_type &lt;chr&gt;, matched_rank &lt;ord&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   returned_rank &lt;ord&gt;, taxa &lt;chr&gt;, original_is_tri &lt;lgl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $taxonomy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 0 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 variables: taxa &lt;chr&gt;, kingdom &lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">genus</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lutaxa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 17 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    original_name     match_type matched_rank returned_rank taxa  original_is_tri</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Bettongia lesueu… exactMatch subspecies   genus         Bett… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Charadrius mongo… higherMat… species      genus         Char… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Charadrius rubri… exactMatch species      genus         Phal… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Eucalyptus        exactMatch genus        genus         Euca… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Eucalyptus vimin… exactMatch species      genus         Euca… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Eucalyptus vimin… exactMatch subspecies   genus         Euca… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Gehyra montium (… canonical… species      genus         Gehy… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Korthalsella jap… higherMat… species      genus         Kort… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Lagorchestes hir… canonical… species      genus         Lago… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Melithreptus gul… exactMatch subspecies   genus         Meli… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Melithreptus gul… exactMatch subspecies   genus         Meli… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Perameles gunnii… exactMatch subspecies   genus         Pera… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Petrogale latera… canonical… species      genus         Petr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> Pterostylis sp. … exactMatch genus        genus         Pter… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> Spyridium erioce… exactMatch variety      genus         Spyr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> Spyridium glabri… exactMatch variety      genus         Spyr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> Thinornis cucull… exactMatch species      genus         Thin… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $taxonomy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 13 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    taxa         kingdom  phylum     class         order           family   genus</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Bettongia    Animalia Chordata   Mammalia      Diprotodontia   Potoroi… Bett…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Charadrius   Animalia Chordata   Aves          Charadriiformes Charadr… Char…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Phalaropus   Animalia Chordata   Aves          Charadriiformes Scolopa… Phal…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Eucalyptus   Plantae  Charophyta Equisetopsida Myrtales        Myrtace… Euca…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Gehyra       Animalia Chordata   Reptilia      Squamata        Gekkoni… Gehy…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Korthalsella Plantae  Charophyta Equisetopsida Santalales      Santala… Kort…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Lagorchestes Animalia Chordata   Mammalia      Diprotodontia   Macropo… Lago…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Melithreptus Animalia Chordata   Aves          Passeriformes   Melipha… Meli…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Perameles    Animalia Chordata   Mammalia      Peramelemorphia Peramel… Pera…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Petrogale    Animalia Chordata   Mammalia      Diprotodontia   Macropo… Petr…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Pterostylis  Plantae  Charophyta Equisetopsida Asparagales     Orchida… Pter…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Spyridium    Plantae  Charophyta Equisetopsida Rosales         Rhamnac… Spyr…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Thinornis    Animalia Chordata   Aves          Charadriiformes Charadr… Thin…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">species</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lutaxa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 17 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    original_name     match_type matched_rank returned_rank taxa  original_is_tri</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Bettongia lesueu… exactMatch subspecies   species       Bett… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Charadrius mongo… higherMat… species      species       Char… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Charadrius rubri… exactMatch species      species       Phal… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Eucalyptus        exactMatch genus        genus         Euca… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Eucalyptus vimin… exactMatch species      species       Euca… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Eucalyptus vimin… exactMatch subspecies   species       Euca… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Gehyra montium (… canonical… species      species       Gehy… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Korthalsella jap… higherMat… species      species       Kort… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Lagorchestes hir… canonical… species      species       Lago… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Melithreptus gul… exactMatch subspecies   species       Meli… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Melithreptus gul… exactMatch subspecies   species       Meli… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Perameles gunnii… exactMatch subspecies   species       Pera… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Petrogale latera… canonical… species      species       Petr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> Pterostylis sp. … exactMatch genus        genus         Pter… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> Spyridium erioce… exactMatch variety      species       Spyr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> Spyridium glabri… exactMatch variety      species       Spyr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> Thinornis cucull… exactMatch species      species       Thin… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $taxonomy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 14 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    taxa                   kingdom  phylum     class   order family genus species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Bettongia lesueur      Animalia Chordata   Mammal… Dipr… Potor… Bett… Betton…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Charadrius mongolus    Animalia Chordata   Aves    Char… Chara… Char… Charad…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Phalaropus lobatus     Animalia Chordata   Aves    Char… Scolo… Phal… Phalar…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Eucalyptus             Plantae  Charophyta Equise… Myrt… Myrta… Euca… <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Eucalyptus viminalis   Plantae  Charophyta Equise… Myrt… Myrta… Euca… Eucaly…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Gehyra montium         Animalia Chordata   Reptil… Squa… Gekko… Gehy… Gehyra…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Korthalsella japonica  Plantae  Charophyta Equise… Sant… Santa… Kort… Kortha…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Lagorchestes hirsutus  Animalia Chordata   Mammal… Dipr… Macro… Lago… Lagorc…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Melithreptus gularis   Animalia Chordata   Aves    Pass… Melip… Meli… Melith…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Perameles gunnii       Animalia Chordata   Mammal… Pera… Peram… Pera… Perame…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Petrogale lateralis    Animalia Chordata   Mammal… Dipr… Macro… Petr… Petrog…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Pterostylis            Plantae  Charophyta Equise… Aspa… Orchi… Pter… <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Spyridium eriocephalum Plantae  Charophyta Equise… Rosa… Rhamn… Spyr… Spyrid…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> Thinornis cucullatus   Animalia Chordata   Aves    Char… Chara… Thin… Thinor…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">subspecies</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lutaxa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 17 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    original_name     match_type matched_rank returned_rank taxa  original_is_tri</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Bettongia lesueu… exactMatch subspecies   subspecies    Bett… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Charadrius mongo… higherMat… species      species       Char… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Charadrius rubri… exactMatch species      species       Phal… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Eucalyptus        exactMatch genus        genus         Euca… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Eucalyptus vimin… exactMatch species      species       Euca… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Eucalyptus vimin… exactMatch subspecies   subspecies    Euca… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Gehyra montium (… canonical… species      species       Gehy… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Korthalsella jap… higherMat… species      species       Kort… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Lagorchestes hir… canonical… species      species       Lago… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Melithreptus gul… exactMatch subspecies   subspecies    Meli… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Melithreptus gul… exactMatch subspecies   subspecies    Meli… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Perameles gunnii… exactMatch subspecies   subspecies    Pera… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Petrogale latera… canonical… species      species       Petr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> Pterostylis sp. … exactMatch genus        genus         Pter… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> Spyridium erioce… exactMatch variety      subspecies    Spyr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> Spyridium glabri… exactMatch variety      subspecies    Spyr… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> Thinornis cucull… exactMatch species      species       Thin… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $taxonomy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 16 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    taxa               kingdom phylum class order family genus species subspecies</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Bettongia lesueur… Animal… Chord… Mamm… Dipr… Potor… Bett… Betton… Bettongia…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Charadrius mongol… Animal… Chord… Aves  Char… Chara… Char… Charad… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Phalaropus lobatus Animal… Chord… Aves  Char… Scolo… Phal… Phalar… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Eucalyptus         Plantae Charo… Equi… Myrt… Myrta… Euca… <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Eucalyptus vimina… Plantae Charo… Equi… Myrt… Myrta… Euca… Eucaly… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Eucalyptus vimina… Plantae Charo… Equi… Myrt… Myrta… Euca… Eucaly… Eucalyptu…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Gehyra montium     Animal… Chord… Rept… Squa… Gekko… Gehy… Gehyra… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Korthalsella japo… Plantae Charo… Equi… Sant… Santa… Kort… Kortha… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Lagorchestes hirs… Animal… Chord… Mamm… Dipr… Macro… Lago… Lagorc… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Melithreptus gula… Animal… Chord… Aves  Pass… Melip… Meli… Melith… Melithrep…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Melithreptus gula… Animal… Chord… Aves  Pass… Melip… Meli… Melith… Melithrep…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Perameles gunnii … Animal… Chord… Mamm… Pera… Peram… Pera… Perame… Perameles…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Petrogale lateral… Animal… Chord… Mamm… Dipr… Macro… Petr… Petrog… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> Pterostylis        Plantae Charo… Equi… Aspa… Orchi… Pter… <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> Spyridium eriocep… Plantae Charo… Equi… Rosa… Rhamn… Spyr… Spyrid… Spyridium…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> Thinornis cuculla… Animal… Chord… Aves  Char… Chara… Thin… Thinor… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># query more taxa (results are added to taxonomy_file but only the new taxa are returned (default `limit = TRUE`)</span></span></span>
<span class="r-in"><span>  <span class="va">more_taxa</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>original_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Amytornis whitei"</span></span></span>
<span class="r-in"><span>                                                , <span class="st">"Amytornis striatus"</span></span></span>
<span class="r-in"><span>                                                , <span class="st">"Amytornis modestus (North, 1902)"</span></span></span>
<span class="r-in"><span>                                                , <span class="st">"Amytornis modestus modestus"</span></span></span>
<span class="r-in"><span>                                                , <span class="st">"Amytornis modestus cowarie"</span></span></span>
<span class="r-in"><span>                                                <span class="op">)</span></span></span>
<span class="r-in"><span>                              <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span> <span class="op">&lt;-</span> <span class="fu">make_taxonomy</span><span class="op">(</span>df <span class="op">=</span> <span class="va">more_taxa</span></span></span>
<span class="r-in"><span>                            , taxonomy_file <span class="op">=</span> <span class="va">temp_file</span></span></span>
<span class="r-in"><span>                            , needed_ranks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                            <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> saving results to C:/temp/joel\RtmpuEJnAu\file175c77d07295.parquet</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following were completely unmatched: Galaxias sp. nov. Hunter and Not a taxa. Consider providing more taxonomic levels, or an override, for each unmatched taxa?</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">species</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lutaxa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   original_name      match_type matched_rank returned_rank taxa  original_is_tri</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Amytornis modestu… canonical… species      species       Amyt… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Amytornis modestu… exactMatch subspecies   species       Amyt… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Amytornis modestu… exactMatch subspecies   species       Amyt… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Amytornis striatus exactMatch species      species       Amyt… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Amytornis whitei   exactMatch species      species       Amyt… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $taxonomy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   taxa               kingdom  phylum   class order         family  genus species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Amytornis modestus Animalia Chordata Aves  Passeriformes Maluri… Amyt… Amytor…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Amytornis striatus Animalia Chordata Aves  Passeriformes Maluri… Amyt… Amytor…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Amytornis whitei   Animalia Chordata Aves  Passeriformes Maluri… Amyt… Amytor…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># no dataframe supplied - all results in taxonomy_file returned</span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span> <span class="op">&lt;-</span> <span class="fu">make_taxonomy</span><span class="op">(</span>taxonomy_file <span class="op">=</span> <span class="va">temp_file</span></span></span>
<span class="r-in"><span>                            , needed_ranks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"subspecies"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                            <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">subspecies</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lutaxa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 22 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    original_name     match_type matched_rank returned_rank taxa  original_is_tri</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Amytornis modest… canonical… species      species       Amyt… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Amytornis modest… exactMatch subspecies   subspecies    Amyt… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Amytornis modest… exactMatch subspecies   subspecies    Amyt… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Amytornis striat… exactMatch species      species       Amyt… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Amytornis whitei  exactMatch species      species       Amyt… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Bettongia lesueu… exactMatch subspecies   subspecies    Bett… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Charadrius mongo… higherMat… species      species       Char… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Charadrius rubri… exactMatch species      species       Phal… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Eucalyptus        exactMatch genus        genus         Euca… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Eucalyptus vimin… exactMatch species      species       Euca… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 12 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $taxonomy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 21 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    taxa               kingdom phylum class order family genus species subspecies</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Amytornis modestus Animal… Chord… Aves  Pass… Malur… Amyt… Amytor… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Amytornis modestu… Animal… Chord… Aves  Pass… Malur… Amyt… Amytor… Amytornis…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Amytornis modestu… Animal… Chord… Aves  Pass… Malur… Amyt… Amytor… Amytornis…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Amytornis striatus Animal… Chord… Aves  Pass… Malur… Amyt… Amytor… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Amytornis whitei   Animal… Chord… Aves  Pass… Malur… Amyt… Amytor… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Bettongia lesueur… Animal… Chord… Mamm… Dipr… Potor… Bett… Betton… Bettongia…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Charadrius mongol… Animal… Chord… Aves  Char… Chara… Char… Charad… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Phalaropus lobatus Animal… Chord… Aves  Char… Scolo… Phal… Phalar… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Eucalyptus         Plantae Charo… Equi… Myrt… Myrta… Euca… <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Eucalyptus vimina… Plantae Charo… Equi… Myrt… Myrta… Euca… Eucaly… <span style="color: #BB0000;">NA</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 11 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># overrrides</span></span></span>
<span class="r-in"><span>  <span class="va">overrides</span> <span class="op">&lt;-</span> <span class="fu">envClean</span><span class="fu">::</span><span class="va"><a href="taxonomy_overrides.html">taxonomy_overrides</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># C. rubricollis binned to Phalarope lobatus at species level!</span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span> <span class="op">&lt;-</span> <span class="fu">make_taxonomy</span><span class="op">(</span>df <span class="op">=</span> <span class="va">overrides</span></span></span>
<span class="r-in"><span>                            , taxonomy_file <span class="op">=</span> <span class="va">temp_file</span></span></span>
<span class="r-in"><span>                            , needed_ranks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"subspecies"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                            <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> saving results to C:/temp/joel\RtmpuEJnAu\file175c77d07295.parquet</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following were completely unmatched: Galaxias sp. nov. Hunter and Not a taxa. Consider providing more taxonomic levels, or an override, for each unmatched taxa?</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">species</span><span class="op">$</span><span class="va">lutaxa</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"rubricollis"</span>, <span class="va">original_name</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   original_name      match_type matched_rank returned_rank taxa  original_is_tri</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Charadrius rubric… exactMatch species      species       Phal… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Thinornis rubrico… higherMat… species      species       Thin… TRUE           </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># add in override - C. rubricollis is binned to T. cucullatus at species level</span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span> <span class="op">&lt;-</span> <span class="fu">make_taxonomy</span><span class="op">(</span>df <span class="op">=</span> <span class="va">overrides</span></span></span>
<span class="r-in"><span>                            , taxonomy_file <span class="op">=</span> <span class="va">temp_file</span></span></span>
<span class="r-in"><span>                            , needed_ranks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"subspecies"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                            , overrides <span class="op">=</span> <span class="va">overrides</span></span></span>
<span class="r-in"><span>                            <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name, returned_rank)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> saving results to C:/temp/joel\RtmpuEJnAu\file175c77d07295.parquet</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following were completely unmatched: Galaxias sp. nov. Hunter and Not a taxa. Consider providing more taxonomic levels, or an override, for each unmatched taxa?</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">taxonomy</span><span class="op">$</span><span class="va">species</span><span class="op">$</span><span class="va">lutaxa</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"rubricollis"</span>, <span class="va">original_name</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   original_name      match_type matched_rank returned_rank taxa  original_is_tri</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Charadrius rubric… exactMatch species      species       Thin… FALSE          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Thinornis rubrico… exactMatch subspecies   species       Thin… TRUE           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: override &lt;lgl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># tweak_species example</span></span></span>
<span class="r-in"><span>  <span class="fu">make_taxonomy</span><span class="op">(</span>df <span class="op">=</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>original_name <span class="op">=</span> <span class="st">"Acacia sp. Small Red-leaved Wattle (J.B.Williams 95033)"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                , tweak_species <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>                <span class="op">)</span><span class="op">$</span><span class="va">raw</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">original_name</span>, <span class="va">scientific_name</span>, <span class="va">species</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> saving results to C:/temp/joel\RtmpuEJnAu\file175c7b4683c.parquet</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   original_name                                          scientific_name species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Acacia sp. Small Red-leaved Wattle (J.B.Williams 9503… Acacia sp. Sma… spec.  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">make_taxonomy</span><span class="op">(</span>df <span class="op">=</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>original_name <span class="op">=</span> <span class="st">"Acacia sp. Small Red-leaved Wattle (J.B.Williams 95033)"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                , tweak_species <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>                <span class="op">)</span><span class="op">$</span><span class="va">raw</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">original_name</span>, <span class="va">scientific_name</span>, <span class="va">species</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> saving results to C:/temp/joel\RtmpuEJnAu\file175c16664e57.parquet</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(original_name)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   original_name                                          scientific_name species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Acacia sp. Small Red-leaved Wattle (J.B.Williams 9503… Acacia sp. Sma… Acacia…</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># clean up</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">taxonomy</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">temp_file</span>, <span class="st">".parquet"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "C:/temp/joel\\RtmpuEJnAu\\file175c77d07295.parquet"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nigel Willoughby, Joel Allan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

